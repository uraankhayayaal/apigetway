# CS FIX
## Install:
1. Install 
    ```bash
    docker-compose exec app composer require friendsofphp/php-cs-fixer
    ```
1. Create cs file config:
    ```php
    <?php

    $finder = (new PhpCsFixer\Finder())
        ->in(__DIR__)
        ->exclude([
            // 'autogenerated_content',
            // 'tests/fixtures',
        ])
        ->notPath([
            // 'dump.php',
            // 'src/exception_file.php',
        ])
    ;

    return (new PhpCsFixer\Config())
        ->setParallelConfig(PhpCsFixer\Runner\Parallel\ParallelConfigFactory::detect())
        // https://marketplace.visualstudio.com/items?itemName=junstyle.php-cs-fixer
        ->setRules([
            '@PER-CS' => true,
            '@PHP82Migration' => true,
            'strict_param' => true,
            'array_syntax' => ['syntax' => 'short'],
        ])
        ->setFinder($finder)
    ;
    ```
1. Add to .gitignore files:
    ```
    .php-cs-fixer.cache
    .php-cs-fixer.php
    ```
## Useage
```bash
docker-compose exec app php ./vendor/bin/php-cs-fixer fix app --allow-risky=yes
```
## On file change for VSCode:
1. Install Name: [File Watcher](https://marketplace.visualstudio.com/items?itemName=appulate.filewatcher)
1. Add settings for project:
    ```json
    {
        "filewatcher.commands": [
            {
                "match": "(?=Users/ayaal/Documents/apps/2child-back-auth/app/*).*(?=\\.php)",
                "isAsync": true,
                "cmd": "file=${file} && cd ${workspaceRoot} && docker exec 2child-api-getway-app ./vendor/bin/php-cs-fixer fix ${file/Users\\/ayaal\\/Documents\\/apps\\/2child-back-auth/app} --allow-risky=yes --cache-file=./.php-cs-fixer.cache --quiet",
                "event": "onFileChange"
            }	
        ]
    }
    ```